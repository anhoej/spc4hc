[["index.html", "Mastering Statistical Process Control charts in Healthcare A practical, hands-on, step-by-step guide for data scientists using R Synopsis", " Mastering Statistical Process Control charts in Healthcare A practical, hands-on, step-by-step guide for data scientists using R Jacob Anh√∏j &amp; Mohammed Amin Mohammed 2024-07-02 Synopsis This is the online version of Mastering Statistical Process Control Charts in Healthcare, a book currently under early development. INTRODUCTION   What is SPC?   About the Book PART 1: Understanding Variation Understanding Variation Given two numbers, one will be bigger rolling dies and flipping coins when you throw a die and get a seven Populations and processes (enumerative vs analytical studies) Patterns of non-random variation in time series data and their interpretation freaks shifts trends waves sawtooths(teeth?) repeated patterns What is SPC? History A modern definition SPC and continuous quality improvement ‚Äì neither can live while the other dies The Case for SPC in Healthcare Introducing SPC Charts Anatomy of SPC charts What SPC charts do and don‚Äôt do Testing for Non-random Variation in SPC Charts Tests based on sigma limits the 3-sigma test the Western Electric rules Runs analysis ‚Äì tests based on the distribution of data points around the centre line identifying unusually long runs identifying unusually few crossings look mom, no control limits! ‚Äì using runs analysis as stand-alone rules with run charts Rules to avoid the trend rule too short longest runs Responding to SPC Signals The voice of the customer vs the voice of the process Conciliating the two voices ‚Äì or, from RAGs to RICHes (RAG = Red, Amber, Green; RICH = Respond, Investigate, Celebrate‚Äôn Hold) PART 2: Constructing SPC Charts with R Your First SPC Charts with Base R A run chart from random normal data Adding control limits to produce a control chart Calculating Control Limits for ‚ÄúThe Magnificent Seven‚Äù Xbar chart S chart I chart (aka X chart) MR chart C chart U chart P chart Highlighting Data Points Outside Control Limits (freaks) Highlighting Shifts, Trends, and Waves Found by Runs Analysis One R Function to Rule Them All Your First SPC Chart with ggplot2 Introducing qicharts2 ‚Äì an R Package Tailored Specifically for SPC in Healthcare PART 3: Case Studies Monitoring Infection Rates (C. diff.) Patient Harm Reducing Patient Wait Times Coronary Artery Bypass Grafts Reducing Response Times for Cecarian Section Faceting Plots for Multivariate Data (Hospital Infections) PART 4: Advanced SPC Techniques Phase One and Phase Two Applications of SPC When to Split SPC Charts When to Transform Data Before Plotting Funnel Plots for Categorical Data Pareto Charts for Ranking Problems Prime Charts for Count Data with Very Large Sample Sizes The Standardised Control Chart The Normalised I Chart Charts for Rare Events T Charts for Time Between Events G Charts for Opportunities Between Cases Bernoulli CUSUM charts for binary data CUSUM and EWMA Charts Multi Variate Charts The Control Charts vs Run Charts Debate Runs Analysis Revisited: The Joint Distribution of Longest Run and Number of Crossings Improving runs analysis using the best box and cut box approaches PART 5: Conclusion and Final Thoughts Summary of Key Points Future Directions Final Thoughts PART 9¬æ: Nerd Stuff Introducing R A Basic Statistical Concepts Counts and measures Distributions Centre mean median Spread range percentiles standard deviation Shape symmetric skewed Principles for Data Visualisation histograms and boxplots for measurement data distributions barplots for count data distributions scatter plots for relations between measurement data point-and-line plots for time series data Data Preparation with R Sources of healthcare data Indicator types: measurements, counts, rates, proportions Getting data in shape for visualisation with R APPENDICES Resources and Further Readings Recommended books Web sites, forums, and communities Other R packages SPC (qcc, spc, ‚Ä¶) Best Practices and Tips for SPC Implementation Formulas and R Functions for Calculating Control Limits Table of Parameters for the Xbar and S Charts Table of Critical Values for Longest Runs and Number of Crossings Glossary of Terms "],["intro.html", "Introduction", " Introduction This book is about the practical application of statistical process control (SPC) methodology in healthcare. While SPC is often thought of simply as a set of tools ‚Äì the control chart being its most prominent member ‚Äì we prefer to think of SPC more broadly as the application of statistical thinking to continuous quality improvement. Statistical Process Control is not about statistics, it is not about ‚Äúprocess-hyphen-control‚Äù, and it is not about conformance to specifications. [‚Ä¶] It is about the continual improvement of processes and outcomes. And it is, first and foremost, a way of thinking with some tools attached. ‚Äî Don Wheeler (Wheeler 2000, p 152) Many excellent books have been written about the thinking and the theory behind SPC (e.g. Wheeler 2000; Montgomery 2009; Mohammed 2024), but very little has been written about how to actually construct SPC charts ‚Äì especially using software. Consequently, this book is mostly about the tools, in particular run and control charts, and how to construct and interpret them using modern software. For example, a control chart like the one in Figure (0.1) may be produced using a single line of code in R (R Core Team 2024), which is often referred to as the lingua franca of statistical computing and visualisation. And since SPC is all about statistical computing and visualisation, R is our software of choice. Figure 0.1: I control chart produced with the R package qicharts2 SPC charts are powerful, intuitive and versatile. First developed in the 1920‚Äôs in production industry, the use of SPC in healthcare has grown spectacularly. For instance, the number of papers in the pubmed database went from only 14 in 1971 to 3252 in 2023 [SEARCH CRITERIA?]. However, a review of SPC in healthcare noted that ‚Äúit‚Äôs easy and not so easy‚Äù [CITATION]. The ‚Äúeasy part‚Äù is that SPC charts are usually intuitive and easily understood. The ‚Äúnot so easy part‚Äù involves the production of these charts. This book aims to help people who want to produce SPC charts in practice using modern software. We refer to such people as data scientist whilst recognising that they may be analysts, practitioners, managers, teachers, students, researchers, patients, etc. So what is different about this book? This book stands out by being a specialized, practical, and modern guide specifically tailored for data scientists in the healthcare sector. Its focus on real-world application, combined with comprehensive coverage of SPC techniques and the use of contemporary tools, makes it a unique and valuable resource. This book is a how to book. Target Audience: This book is specifically tailored for data scientists who want to learn how to produce SPC charts by the R programming language. Use of R: Our choice of software is R - which is popular, free, and open source. One major advantage of R (and programming languages in general) is that all the steps and procedures involved in analysing data and constructing graphs and other output are documented in readable form in the source code thus making analyses transparent and reproducible, which is rarely the case with ‚Äúpoint-and-click‚Äù software. Another advantage is that R has built-in functions for producing publication ready graphics of very high quality. By being pro-R we are not anti any other software, and the principles involved in creating SPC chart with R demonstrated in this book may be ported to other software solutions. Healthcare Focus: While there are many general books on SPC, this book‚Äôs focus is on practical applications in healthcare, making it particularly relevant for those working in this field. It addresses the unique challenges and requirements of applying SPC methods in healthcare settings, such as patient safety, clinical outcomes, and operational efficiency as described in an accompanying book (Mohammed 2024). Practical Guide: The book is a practical step-by-step guide, using real-world examples and case studies that enable readers to produce and use SPC charts with confidence. This hands-on approach helps bridge the gap between theory and practice. Comprehensive Coverage: The book covers a comprehensive range of topics within SPC, from basic concepts to advanced techniques. This ensures that both beginners and experienced data scientists can find valuable insights and techniques that can be applied to their work in healthcare. Resources: The book comes with additional resources such as R scripts, datasets, and access to an online GitHub repository. Prerequisites: We assume no prior knowledge of SPC, but a basic familiarity with R is required to understand the processes and algorithms for constructing SPC charts. Mathematical details are relegated to appendices. We hope you find the book useful and would appreciate your feedback on how it can be continually improved upon. JA: jacob@anhoej.net MAM: m.a.mohammed5@bradford.ac.uk References Mohammed, M A. 2024. Statistical Process Control. Elements of Improving Quality and Safety in Healthcare. Cambridge University Press. Montgomery, Douglas C. 2009. Statistical Quality Control: A Modern Introduction, Sixth Ed. John Wiley &amp; Sons. R Core Team. 2024. R: A Language and Environment for Statistical Computing. Vienna, Austria: R Foundation for Statistical Computing. https://www.R-project.org/. Wheeler, Donald J. 2000. Understanding Variation ‚Äì the Key to Managing Chaos. Knoxville, Tennessee: SPC Press. "],["variation.html", "Chapter 1 Understanding Variation", " Chapter 1 Understanding Variation "],["first-chart.html", "Chapter 2 Your First SPC Charts With Base R 2.1 A run chart from random normal data 2.2 Adding control limits to produce a control chart 2.3 That‚Äôs all, Folks!", " Chapter 2 Your First SPC Charts With Base R From part 1 of this book we have a good grasp of what SPC is and how SPC charts work. In this chapter we will start constructing SPC chart. We begin using only functions from base R. Later we will move to ggplot2and qicharts2. In essence, an SPC charts is a (point-and-)line plot of data over time with a horizontal line to represent the data centre and ‚Äì in case of a control chart ‚Äì two lines to represent the estimated upper and lower bounds of the natural variation in data. To construct an SPC chart, all we need are four vectors with the y-coordinates of the data points and lines. Let‚Äôs start by creating some artificial data to work with. We draw 24 random numbers from a normal distribution with mean = 0 and standard deviation (sd) = 1. # Initialise random number generator to make results reproducible set.seed(27) # Create a vector of 24 random numbers from a normal distribution y &lt;- rnorm(24, mean = 0, sd = 1) 2.1 A run chart from random normal data First we plot a simple run chart without any helper lines (Figure 2.1): # Make point-and-line plot plot(y, type = &#39;o&#39;) Figure 2.1: Simple run chart (As a side note, this reminds me (JA) of a manager, who once said to me: ‚ÄúYou make such beautiful graphs, but can‚Äôt you stop them from going up and down all the time.‚Äù üòÅ) Then we add the the centre line to the plot. Since we know the parameters of the distribution data come from, we can use the theoretical population mean/median (= 0) as the centre line. With the centre line in place, we can apply runs analysis to identify unnatural patterns suggesting sustained shifts or trends in data over time (Figure 2.2): # Create y-coordinates for the centre line cl &lt;- rep(0, length(y)) # Plot data and add centre line plot(y, type = &#39;o&#39;) lines(cl) Figure 2.2: Run chart with centre line We find that the longest runs (there are two of them, 6:10 and 15:19) have 5 data points and that the curve crosses the centre line 9 times. With 24 data points and using the runs rules proposed previously, the upper limit for longest run is 8 as is (coincidentally) the lower limit for number of crossings. Consequently, these data seem to come from a random process (which we already knew). 2.2 Adding control limits to produce a control chart We use the same technique to add the lower and upper control limits. Remember that the control limits are usually set to \\(CL \\pm 3 SD\\), where CL is the centre line and SD is the estimated standard deviation ‚Äì that is, the standard deviation of the natural variation in data, not the pooled standard deviation that would include both random and any non-random variation. Again, since we know the parameters of the distribution, we use the theoretical population standard deviation (= 1) to calculate the control limits. # Create y-coordinates for the control limits lcl &lt;- rep(-3, length(y)) ucl &lt;- rep(3, length(y)) Finally, we need to expand the y-axis limits to make room not only for the data points but also the lines (Figure 2.3): # Plot data expanding y-axis to make room for all data and lines plot(y, type = &#39;o&#39;, ylim = range(y, lcl, ucl)) # Add lines lines(ucl) lines(cl) lines(lcl) Figure 2.3: Standardised control chart As expected, all data points fall within the control limits suggesting only random variation. Now, let‚Äôs mimic a shift in data by introducing four data points (21:24) from a normal distribution with mean = 3 (Figure 2.4): # Initialise random number generator to make results reproducible set.seed(19) # Introduce a shift in data y[21:24] &lt;- rnorm(4, mean = 3) # Plot control chart plot(y, type = &#39;o&#39;, ylim = range(y, lcl, ucl)) lines(ucl) lines(cl) lines(lcl) Figure 2.4: Control chart with data points outside the upper control limit (freaks) Note that only one of the four data points from the shift is above the upper control limit. This is a reminder that even large shifts in data are not guaranteed to show up immediately. Rather, shifts in data increases the chance that future data point will fall outside the limits. The chance of discovering a shift depends on two things: 1. the size of the shift; 2. how long we are willing to wait for a shift to show itself. 2.3 That‚Äôs all, Folks! So constructing an SPC chart using R may be done using only a few lines of code. In fact, most of the code in this chapter went to prepare the data to be plotted. The charts themselves are rather simple and plotting is the same every time: 1. plot the dots; 2. add the lines. Later we will wrap all the steps in a function that also automates the calculation of empirical centre and control lines, highlights signals of non-random variation in data, and makes plots that are a lot nicer to look at than the rather crude ones we have produces so far. In the next chapter we will calculate control limits for the control charts that are most commonly used in healthcare, ‚ÄúThe Magnificent Seven‚Äù. This is all about estimating the standard deviation in data, which depends on the type of data. "],["limits.html", "Chapter 3 Calculating Control Limits for ‚ÄúThe Magnificent Seven‚Äù 3.1 Measurement data 3.2 Count data", " Chapter 3 Calculating Control Limits for ‚ÄúThe Magnificent Seven‚Äù 3.1 Measurement data 3.1.1 Xbar chart 3.1.2 S chart 3.1.3 I chart (aka X chart) 3.1.4 MR chart 3.2 Count data 3.2.1 C chart 3.2.2 U chart 3.2.3 P chart "],["case1.html", "Chapter 4 Case 1:", " Chapter 4 Case 1: "],["case-2.html", "Chapter 5 Case 2:", " Chapter 5 Case 2: "],["hello-bookdown.html", "A Hello bookdown A.1 A section", " A Hello bookdown All chapters start with a first-level heading followed by your chapter title, like the line above. There should be only one first-level heading (#) per .Rmd file. A.1 A section All chapter sections start with a second-level (##) or higher heading followed by your section title, like the sections above and below here. You can have as many as you want within a chapter. An unnumbered section Chapters and sections are numbered by default. To un-number a heading, add a {.unnumbered} or the shorter {-} at the end of the heading, like in this section. "],["cross.html", "B Cross-references B.1 Chapters and sub-chapters B.2 Captioned figures and tables", " B Cross-references Cross-references make it easier for your readers to find and link to elements in your book. B.1 Chapters and sub-chapters There are two steps to cross-reference any heading: Label the heading: # Hello world {#nice-label}. Leave the label off if you like the automated heading generated based on your heading title: for example, # Hello world = # Hello world {#hello-world}. To label an un-numbered heading, use: # Hello world {-#nice-label} or {# Hello world .unnumbered}. Next, reference the labeled heading anywhere in the text using \\@ref(nice-label); for example, please see Chapter B. If you prefer text as the link instead of a numbered reference use: any text you want can go here. B.2 Captioned figures and tables Figures and tables with captions can also be cross-referenced from elsewhere in your book using \\@ref(fig:chunk-label) and \\@ref(tab:chunk-label), respectively. See Figure B.1. par(mar = c(4, 4, .1, .1)) plot(pressure, type = &#39;b&#39;, pch = 19) Figure B.1: Here is a nice figure! Don‚Äôt miss Table B.1. knitr::kable( head(pressure, 10), caption = &#39;Here is a nice table!&#39;, booktabs = TRUE ) Table B.1: Here is a nice table! temperature pressure 0 0.0002 20 0.0012 40 0.0060 60 0.0300 80 0.0900 100 0.2700 120 0.7500 140 1.8500 160 4.2000 180 8.8000 "],["parts.html", "C Parts", " C Parts You can add parts to organize one or more book chapters together. Parts can be inserted at the top of an .Rmd file, before the first-level chapter heading in that same file. Add a numbered part: # (PART) Act one {-} (followed by # A chapter) Add an unnumbered part: # (PART\\*) Act one {-} (followed by # A chapter) Add an appendix as a special kind of un-numbered part: # (APPENDIX) Other stuff {-} (followed by # A chapter). Chapters in an appendix are prepended with letters instead of numbers. "],["footnotes-and-citations.html", "D Footnotes and citations D.1 Footnotes D.2 Citations", " D Footnotes and citations D.1 Footnotes Footnotes are put inside the square brackets after a caret ^[]. Like this one 1. D.2 Citations Reference items in your bibliography file(s) using @key. For example, we are using the bookdown package (Xie 2024) (check out the last code chunk in index.Rmd to see how this citation key was added) in this sample book, which was built on top of R Markdown and knitr (Xie 2015) (this citation was added manually in an external file book.bib). Note that the .bib files need to be listed in the index.Rmd with the YAML bibliography key. The RStudio Visual Markdown Editor can also make it easier to insert citations: https://rstudio.github.io/visual-markdown-editing/#/citations References Xie, Yihui. 2015. Dynamic Documents with R and Knitr. 2nd ed. Boca Raton, Florida: Chapman; Hall/CRC. http://yihui.org/knitr/. ‚Äî‚Äî‚Äî. 2024. Bookdown: Authoring Books and Technical Documents with r Markdown. https://github.com/rstudio/bookdown. This is a footnote.‚Ü©Ô∏é "],["blocks.html", "E Blocks E.1 Equations E.2 Theorems and proofs E.3 Callout blocks", " E Blocks E.1 Equations Here is an equation. \\[\\begin{equation} f\\left(k\\right) = \\binom{n}{k} p^k\\left(1-p\\right)^{n-k} \\tag{E.1} \\end{equation}\\] You may refer to using \\@ref(eq:binom), like see Equation (E.1). E.2 Theorems and proofs Labeled theorems can be referenced in text using \\@ref(thm:tri), for example, check out this smart theorem E.1. Theorem E.1 For a right triangle, if \\(c\\) denotes the length of the hypotenuse and \\(a\\) and \\(b\\) denote the lengths of the other two sides, we have \\[a^2 + b^2 = c^2\\] Read more here https://bookdown.org/yihui/bookdown/markdown-extensions-by-bookdown.html. E.3 Callout blocks The R Markdown Cookbook provides more help on how to use custom blocks to design your own callouts: https://bookdown.org/yihui/rmarkdown-cookbook/custom-blocks.html "],["sharing-your-book.html", "F Sharing your book F.1 Publishing F.2 404 pages F.3 Metadata for sharing", " F Sharing your book F.1 Publishing HTML books can be published online, see: https://bookdown.org/yihui/bookdown/publishing.html F.2 404 pages By default, users will be directed to a 404 page if they try to access a webpage that cannot be found. If you‚Äôd like to customize your 404 page instead of using the default, you may add either a _404.Rmd or _404.md file to your project root and use code and/or Markdown syntax. F.3 Metadata for sharing Bookdown HTML books will provide HTML metadata for social sharing on platforms like Twitter, Facebook, and LinkedIn, using information you provide in the index.Rmd YAML. To setup, set the url for your book and the path to your cover-image file. Your book‚Äôs title and description are also used. This gitbook uses the same social sharing data across all chapters in your book- all links shared will look the same. Specify your book‚Äôs source repository on GitHub using the edit key under the configuration options in the _output.yml file, which allows users to suggest an edit by linking to a chapter‚Äôs source file. Read more about the features of this output format here: https://pkgs.rstudio.com/bookdown/reference/gitbook.html Or use: ?bookdown::gitbook "],["references.html", "References", " References Mohammed, M A. 2024. Statistical Process Control. Elements of Improving Quality and Safety in Healthcare. Cambridge University Press. Montgomery, Douglas C. 2009. Statistical Quality Control: A Modern Introduction, Sixth Ed. John Wiley &amp; Sons. R Core Team. 2024. R: A Language and Environment for Statistical Computing. Vienna, Austria: R Foundation for Statistical Computing. https://www.R-project.org/. Wheeler, Donald J. 2000. Understanding Variation ‚Äì the Key to Managing Chaos. Knoxville, Tennessee: SPC Press. Xie, Yihui. 2015. Dynamic Documents with R and Knitr. 2nd ed. Boca Raton, Florida: Chapman; Hall/CRC. http://yihui.org/knitr/. ‚Äî‚Äî‚Äî. 2024. Bookdown: Authoring Books and Technical Documents with r Markdown. https://github.com/rstudio/bookdown. "],["404.html", "Page not found", " Page not found The page you requested cannot be found (perhaps it was moved or renamed). You may want to try searching to find the page's new location, or use the table of contents to find the page you are looking for. "]]
