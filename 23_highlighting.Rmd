# Highlighting Freaks, Shifts, and Trends {#highlighting}

```{r, echo=FALSE}
knitr::opts_chunk$set(fig.asp = 2/3,
                      dev     = 'svg')

source('R/spc1.R', local = knitr::knit_global())
source('R/runs.analysis.R', local = knitr::knit_global())
```

## Introducing the cdiff data set

```{r}
cdiff <- read.csv('data/cdiff.csv',
                  comment.char = '#',
                  colClasses = c('Date',
                                 'integer',
                                 'integer'))

cdiff <- within(cdiff, {
  cl  <- mean(infections)
  lcl <- cl - 3 * sqrt(cl)
  ucl <- cl + 3 * sqrt(cl)
  
})

head(cdiff)
```

```{r}
with(cdiff, {
  spc(month, infections, cl, lcl, ucl)
})
```

## Improved `spc()` function

```{r, file='R/spc2.R', attr.source='.numberLines'}

```

```{r}
with(cdiff, {
  spc(month, infections, cl, lcl, ucl)
})
```

----
## Runs Analysis {-}

```{r, file='R/runs.analysis.R', eval=FALSE}

```

